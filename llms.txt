# feltr

`feltr` offers an R interface to the [Felt
API](https://feltmaps.notion.site/Felt-Public-API-reference-c01e0e6b0d954a678c608131b894e8e1).
You can create new maps, edit existing maps, and extract data. `feltr`
includes tools for working with layers, which represent geographic data,
and elements, which are interactive annotations. Spatial data accessed
from the API is transformed to work with ‘sf’.

## Installation

You can install the stable version of `feltr` from
[CRAN](https://cran.r-project.org/package=feltr) with:

``` r
install.package('feltr')
```

You can install the development version of `feltr` from
[GitHub](https://github.com/christopherkenny/feltr) with:

``` r
remotes::install_github('christopherkenny/feltr')
```

## API Key

An API key can be obtained by signing into your Felt account and looking
under Account Settings at the Integrations tab. Once obtained, it can be
loaded for persistent use with
`feltr::set_felt_key('YOUR KEY', install = TRUE, r_env = file.path(Sys.getenv('HOME'), '.Renviron'))`.

## Example

We can create a map, add some data to it, and even delete it.

``` r
library(feltr)
## create a map
map <- felt_create_map(title = 'feltr README')
```

Then we can add some data to it from a URL.

``` r
felt_add_map_layers_url(
  map_id = map$id, 
  url = 'https://www.rocklandgis.com/portal/sharing/rest/content/items/73fc78cb0fb04580b4788937fe5ee697/data',
  name = 'Parks'
)
#> # A tibble: 0 × 6
#> # ℹ 6 variables: name <chr>, status <chr>, progress <dbl>, id <chr>,
#> #   type <chr>, relationships <list>
```

Finally, we can even delete the map from R.

``` r
felt_delete_map(map_id = map$id)
#> [1] 204
```

This returns a 204 on success.

## Related Packages

- [feltr](https://elipousson.github.io/feltr/): There is another R
  package by Eli Pousson with the same name available on
  [GitHub](https://github.com/elipousson/feltr).

# Package index

## Work with Maps

Operate on a map

- [`felt_create_map()`](http://christophertkenny.com/feltr/reference/felt_create_map.md)
  : Create a new map
- [`felt_delete_map()`](http://christophertkenny.com/feltr/reference/felt_delete_map.md)
  : Delete an existing map

## Retrieve Existing Information

Download information about maps, layers, or elements.

- [`felt_get_map()`](http://christophertkenny.com/feltr/reference/felt_get_map.md)
  [`felt_get_map_layers()`](http://christophertkenny.com/feltr/reference/felt_get_map.md)
  [`felt_get_map_layer()`](http://christophertkenny.com/feltr/reference/felt_get_map.md)
  : Get Map Information from Map ID
- [`felt_get_map_elements()`](http://christophertkenny.com/feltr/reference/felt_get_map_elements.md)
  [`felt_get_map_element_groups()`](http://christophertkenny.com/feltr/reference/felt_get_map_elements.md)
  [`felt_get_map_elements_in_group()`](http://christophertkenny.com/feltr/reference/felt_get_map_elements.md)
  : Get Map Elements from Map ID
- [`felt_update_layer_details()`](http://christophertkenny.com/feltr/reference/felt_update_layer_details.md)
  : Update a Layer's Details
- [`felt_update_layer_group_details()`](http://christophertkenny.com/feltr/reference/felt_update_layer_group_details.md)
  : Update a Layer Group's Details
- [`felt_update_map_details()`](http://christophertkenny.com/feltr/reference/felt_update_map_details.md)
  : Update a Map's Details

## Edit Maps or Layers

Edit or upload maps and layers.

- [`felt_add_map_elements()`](http://christophertkenny.com/feltr/reference/felt_add_map_elements.md)
  : Add Elements to Existing Map
- [`felt_add_map_layers()`](http://christophertkenny.com/feltr/reference/felt_add_map_layers.md)
  : Add Layers to Existing Map
- [`felt_add_map_layers_url()`](http://christophertkenny.com/feltr/reference/felt_add_map_layers_url.md)
  : Add Layers to Existing Map from URL
- [`felt_delete_map_layer()`](http://christophertkenny.com/feltr/reference/felt_delete_map_layer.md)
  : Delete Layer from an Existing Map

## Work with Felt styles

Get and edit json representing the Felt Style Language

- [`felt_patch_style()`](http://christophertkenny.com/feltr/reference/felt_patch_style.md)
  : Update Felt Style Information for a Layer

## Retrieve User Information

Get information about the user (self) account

- [`felt_get_user()`](http://christophertkenny.com/feltr/reference/felt_get_user.md)
  : Obtain information about the user

## Other functions

Other functions, including working with keys

- [`has_felt_key()`](http://christophertkenny.com/feltr/reference/key.md)
  [`get_felt_key()`](http://christophertkenny.com/feltr/reference/key.md)
  [`felt_get_key()`](http://christophertkenny.com/feltr/reference/key.md)
  [`felt_has_key()`](http://christophertkenny.com/feltr/reference/key.md)
  : Check or Get Felt API Key
- [`set_felt_key()`](http://christophertkenny.com/feltr/reference/set_felt_key.md)
  [`felt_set_key()`](http://christophertkenny.com/feltr/reference/set_felt_key.md)
  : Add Entry to Renviron
- [`felt_add_library_layer()`](http://christophertkenny.com/feltr/reference/felt_add_library_layer.md)
  : Add layer to library
- [`felt_add_library_layer_group()`](http://christophertkenny.com/feltr/reference/felt_add_library_layer_group.md)
  : Add layer group to library
- [`felt_delete_map_elements()`](http://christophertkenny.com/feltr/reference/felt_delete_map_elements.md)
  : Delete an existing element
- [`felt_get_comments()`](http://christophertkenny.com/feltr/reference/felt_get_comments.md)
  : Export Comments on an Existing Map
- [`felt_get_library()`](http://christophertkenny.com/feltr/reference/felt_get_library.md)
  : List all layers in your workspace library
- [`felt_get_map_layer_group()`](http://christophertkenny.com/feltr/reference/felt_get_map_layer_group.md)
  : Get information for a layer group
- [`felt_refresh_layer()`](http://christophertkenny.com/feltr/reference/felt_refresh_layer.md)
  : Refresh an existing layer

